"use strict";angular.module("docs.giv2giv.orgApp",[]).config(["$httpProvider",function(a){delete a.defaults.headers.common["X-Requested-With"],delete a.defaults.headers.post["Content-type"],delete a.defaults.headers.post["content-type"]}]),angular.module("docs.giv2giv.orgApp").directive("endpoint",function(){return{template:'<div class="endpoint"><div class="endpoint__heading"><span class="endpoint__method">{{epMethod | upperCase}}</span><span class="endpoint__url">{{epUrl}}</span><auth-token/></div><form><p class="endpoint_description">{{epDescription}}</p><div class="endpoint__params" ng-transclude></div><button class="btn" ng-click="submit()">Try it</button></form><div class="endpoint__request" ng-show="request"><span>Request url:</span><span>{{requestUrl}}</span></div><div class="endpoint__request" ng-show="request"><span>Request</span><pre>{{request}}</pre></div><div class="endpoint__response" ng-show="response"><span>Response</span><span class="endpoint__response-code" ng-class="responseClass">{{responseCode}}</span><pre>{{response}}</pre></div></div>',restrict:"E",transclude:!0,scope:{epUrl:"@url",epMethod:"@method",epDescription:"@description",epFormat:"@format",epAuth:"@auth",request:"@",response:"@",responseCode:"@"},require:"^apiDocs",link:function(a,b,c,d){a.data=d.data},controller:["$scope","$rootScope","$element","$http",function(a,b,c,d){a.submit=function(){a.epDomain=a.data.docsUrl,a.authToken=$(".authToken").val(),a.docsSsl=a.data.docsSsl;var b=c.find("form").serializeArray(),e={};$.each(b,function(a,b){e[b.name]=b.value}),a.request=JSON.stringify(e);var f="";f="true"==a.docsSsl?"https://":"http://",a.requestUrl=f+a.epDomain+a.epUrl;var g={method:a.epMethod.toUpperCase(),url:a.requestUrl,data:a.request};"true"==a.epAuth&&(g.headers={Authorization:"Token token="+a.authToken}),d(g).success(function(b,c){a.response=b,a.responseCode=c,a.responseClass="endpoint__response-code--success"}).error(function(b,c){a.response=b,a.responseCode=c,a.responseClass="endpoint__response-code--error"})}}]}}),angular.module("docs.giv2giv.orgApp").directive("param",function(){return{template:'<div class="endpoint__param" ng-init="param[name] = 12345;"><label class="endpoint__param-label">{{name}}:</label><ng-switch on="type"><input ng-switch-when="url" type="text" ng-model="$parent.param[name]" class="{{name}} endpoint__param-input"/><input ng-switch-default type="text" name="{{name}}" value="{{default}}" class="endpoint__param-input"/></ng-switch><span class="endpoint__param-type">{{type}}</span><span>{{description}}</span></div>',restrict:"E",replace:!0,scope:{name:"@name",type:"@type",description:"@description","default":"@default"},controller:["$scope","$rootScope",function(a,b){a.param={},a.$watch("param",function(c){var d=0;for(var e in c)d++;1==d&&(c[a.name]=a.default,console.log(c)),b.$broadcast("ParamUrl.Updated",c)},!0)}],link:function(){}}}),angular.module("docs.giv2giv.orgApp").directive("apiDocs",function(){return{scope:{docsUrl:"@url",docsSsl:"@ssl",docsDescription:"@desc"},transclude:!0,template:'<div><h1 class="page-header">{{docsUrl}}<small>{{docsDescription}}</small></h1><div ng-transclude></div></div>',restrict:"E",controller:["$scope","$rootScope",function(a,b){this.data=a,b.$on("ParamUrl.Updated",function(a,c){b.param=c;for(var d in c)$("."+d).val(c[d])})}],link:function(){}}}),angular.module("docs.giv2giv.orgApp").filter("upperCase",function(){return function(a){return a.toUpperCase()}}),angular.module("docs.giv2giv.orgApp").directive("authToken",function(){return{template:'<span>Access Token:</span><input type="text" ng-model="authToken" class="authToken"/>',restrict:"E",link:function(a){a.$watch("authToken",function(a){$(".authToken").val(a)})}}});